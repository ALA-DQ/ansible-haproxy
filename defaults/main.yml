# defaults file for haproxy
---
haproxy_install: []

haproxy_global:
  log:
    - address: /dev/log
      facility: local0
    - address: /dev/log
      facility: local1
      level: notice
  chroot: /var/lib/haproxy
  stats:
    socket: "{{ '/run/haproxy/admin.sock' if ansible_distribution_version | version_compare('12.04', '>=') else '/var/run/haproxy/admin.sock' }}"
    timeout: 30s
  user: haproxy
  group: haproxy
  daemon: true
  ca_base: /etc/ssl/certs
  crt_base: /etc/ssl/private
  ssl_default_bind_ciphers: 'ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AESGCM:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS'
  ssl_default_bind_options: 'no-sslv3'

haproxy_defaults:
  log: global
  mode: http
  option:
    - httplog
    - dontlognull
  timeout:
    connect: 5000
    client: 50000
    server: 50000
  errorfile:
    400: /etc/haproxy/errors/400.http
    403: /etc/haproxy/errors/403.http
    408: /etc/haproxy/errors/408.http
    500: /etc/haproxy/errors/500.http
    502: /etc/haproxy/errors/502.http
    503: /etc/haproxy/errors/503.http
    504: /etc/haproxy/errors/504.http
